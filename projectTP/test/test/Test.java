package test;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.IOException;
import java.io.StringReader;
import java.net.URISyntaxException;

import org.jdom.Document;
import org.jdom.Element;
import org.jdom.JDOMException;
import org.jdom.input.SAXBuilder;
import org.jdom.xpath.XPath;

import com.nimbler.tp.util.TpConstants;

public class Test {
	public static String getFeedback(String startDate, String endDate, String from, String to, String feedbackTime, String source) throws IOException, URISyntaxException{
		String filePath ="C:\\Eclipse_workspace\\Pick_One_Workspace\\Test1\\src\\OTP.html";
		File file = new File(Test.class.getClassLoader().getResource(TpConstants.OTP_HTML_FILE_PATH).toURI());
		FileReader fileReader = new FileReader(file);
		BufferedReader bf = new BufferedReader(fileReader);
		String line;
		StringBuilder sb = new StringBuilder();
		while((line=bf.readLine())!=null){
			sb.append(line);
		}
		String otpFeedback = sb.toString().replace("--startdate--", startDate)
				.replace("--enddate--", endDate)
				.replace("--from--", from)
				.replace("--to--", to)
				.replace("--feedbacktime--", feedbackTime)
				.replace("--source--", source);
		System.out.println(otpFeedback);

		return otpFeedback;
	}

	public static void main(String[] args) throws IOException, JDOMException, URISyntaxException {
		/*	String path ="C:\\Documents and Settings\\suresh\\Desktop\\Test.xml";
		FileReader fileReader = new FileReader(path);
		BufferedReader bf = new BufferedReader(fileReader);
		String line;
		StringBuilder sb = new StringBuilder();
		while((line=bf.readLine())!=null){
			sb.append(line);
		}
		String strTrip = sb.toString();
		getXmlData(strTrip.replace("&", "and"));*/
		//		testJson();

	}


	private static void testJson() {

		//		String s = "{\"requestParameters\":{\"optimize\":\"QUICK\",\"time\":\"6:30 PM\",\"wheelchair\":\"false\",\"maxWalkDistance\":\"800.0\",\"routerId\":\"\",\"fromPlace\":\"37.785834,-122.406417\",\"toPlace\":\"37.776538,-122.424898\",\"date\":\"5/22/12\",\"mode\":\"TraverseMode (WALK, TRAM, SUBWAY, RAIL, BUS, FERRY, CABLE_CAR, GONDOLA, FUNICULAR, TRANSIT, TRAINISH, BUSISH)\",\"numItineraries\":\"3\"},\"plan\":{\"date\":1337736600000,\"from\":{\"name\":\"Stockton Street\",\"stopId\":null,\"stopCode\":null,\"lon\":-122.40625983220806,\"lat\":37.785865575376455,\"arrival\":null,\"departure\":null,\"orig\":null,\"zoneId\":null,\"geometry\":\"{\"type\": \"Point\", \"coordinates\": [-122.40625983220806,37.785865575376455]}\"},\"to\":{\"name\":\"Hayes Street\",\"stopId\":null,\"stopCode\":null,\"lon\":-122.42491104758646,\"lat\":37.77663946380341,\"arrival\":null,\"departure\":null,\"orig\":null,\"zoneId\":null,\"geometry\":\"{\"type\": \"Point\", \"coordinates\": [-122.42491104758646,37.77663946380341]}\"},\"itineraries\":[{\"duration\":1218000,\"startTime\":1337736751000,\"endTime\":1337737969000,\"walkTime\":221,\"transitTime\":755,\"waitingTime\":242,\"walkDistance\":285.3088646187561,\"elevationLost\":0.0,\"elevationGained\":0.0,\"transfers\":0,\"fare\":null,\"legs\":[{\"startTime\":1337736751000,\"endTime\":1337736864000,\"distance\":143.60841654969917,\"mode\":\"WALK\",\"route\":\"\",\"agencyName\":null,\"agencyUrl\":null,\"routeColor\":null,\"routeTextColor\":null,\"interlineWithPreviousLeg\":null,\"tripShortName\":null,\"headsign\":null,\"agencyId\":null,\"tripId\":null,\"from\":{\"name\":\"Stockton Street\",\"stopId\":null,\"stopCode\":null,\"lon\":-122.40625983220806,\"lat\":37.785865575376455,\"arrival\":null,\"departure\":null,\"orig\":null,\"zoneId\":null,\"geometry\":\"{\"type\": \"Point\", \"coordinates\": [-122.40625983220806,37.785865575376455]}\"},\"to\":{\"name\":\"Market St & Grant Ave\",\"stopId\":{\"agencyId\":\"SFMTA\",\"id\":\"5674\"},\"stopCode\":null,\"lon\":-122.40516,\"lat\":37.78639,\"arrival\":1337736865000,\"departure\":1337736865000,\"orig\":null,\"zoneId\":null,\"geometry\":\"{\"type\": \"Point\", \"coordinates\": [-122.40516,37.78639]}\"},\"legGeometry\":{\"points\":\"s`seFbnbjV\EBGAk@{@kAeAyA\",\"levels\":null,\"length\":6},\"routeShortName\":null,\"routeLongName\":null,\"boardRule\":null,\"alightRule\":null,\"duration\":113000,\"bogusNonTransitLeg\":false,\"steps\":[{\"distance\":17.110596300427797,\"relativeDirection\":null,\"streetName\":\"Stockton Street\",\"absoluteDirection\":\"SOUTH\",\"exit\":null,\"stayOn\":false,\"bogusName\":false,\"lon\":-122.40625983220806,\"lat\":37.785865575376455,\"elevation\":\"\"},{\"distance\":23.570645353551058,\"relativeDirection\":\"LEFT\",\"streetName\":\"4th Street\",\"absoluteDirection\":\"SOUTHEAST\",\"exit\":null,\"stayOn\":false,\"bogusName\":false,\"lon\":-122.4062293,\"lat\":37.7857136,\"elevation\":\"\"},{\"distance\":102.92717489572031,\"relativeDirection\":\"LEFT\",\"streetName\":\"Market Street\",\"absoluteDirection\":\"NORTHEAST\",\"exit\":null,\"stayOn\":false,\"bogusName\":false,\"lon\":-122.40596740000001,\"lat\":37.7857071,\"elevation\":\"\"}]},{\"startTime\":1337736985000,\"endTime\":1337737740000,\"distance\":1990.5607087872652,\"mode\":\"BUS\",\"route\":\"21\",\"agencyName\":null,\"agencyUrl\":null,\"routeColor\":null,\"routeTextColor\":null,\"interlineWithPreviousLeg\":null,\"tripShortName\":null,\"headsign\":\"Golden Gate Park\",\"agencyId\":\"SFMTA\",\"tripId\":\"5086542\",\"from\":{\"name\":\"Market St & Grant Ave\",\"stopId\":{\"agencyId\":\"SFMTA\",\"id\":\"5674\"},\"stopCode\":null,\"lon\":-122.40516,\"lat\":37.78639,\"arrival\":null,\"departure\":null,\"orig\":null,\"zoneId\":null,\"geometry\":\"{\"type\": \"Point\", \"coordinates\": [-122.40516,37.78639]}\"},\"to\":{\"name\":\"Hayes St & Gough St\",\"stopId\":{\"agencyId\":\"SFMTA\",\"id\":\"4996\"},\"stopCode\":null,\"lon\":-122.423326,\"lat\":37.776893,\"arrival\":1337737740000,\"departure\":1337737740000,\"orig\":null,\"zoneId\":null,\"geometry\":\"{\"type\": \"Point\", \"coordinates\": [-122.423326,37.776893]}\"},\"legGeometry\":{\"points\":\"mcseF|fbjVrBpC|E|G~B`DlCnD`B|BnBlCnEhGx@dAdAxALRvIpLFHxDjFL~AJvA\nFh@jIL~AZdFh@hIF`A\",\"levels\":null,\"length\":22},\"routeShortName\":\"21\",\"routeLongName\":\"HAYES\",\"boardRule\":null,\"alightRule\":null,\"duration\":755000,\"bogusNonTransitLeg\":false,\"intermediateStops\":[]},{\"startTime\":1337737861000,\"endTime\":1337737969000,\"distance\":141.70044806905693,\"mode\":\"WALK\",\"route\":\"\",\"agencyName\":null,\"agencyUrl\":null,\"routeColor\":null,\"routeTextColor\":null,\"interlineWithPreviousLeg\":null,\"tripShortName\":null,\"headsign\":null,\"agencyId\":null,\"tripId\":null,\"from\":{\"name\":\"Hayes Street\",\"stopId\":null,\"stopCode\":null,\"lon\":-122.42331971511402,\"lat\":37.776844148171264,\"arrival\":null,\"departure\":null,\"orig\":null,\"zoneId\":null,\"geometry\":\"{\"type\": \"Point\", \"coordinates\": [-122.42331971511402,37.776844148171264]}\"},\"to\":{\"name\":\"Hayes Street\",\"stopId\":null,\"stopCode\":null,\"lon\":-122.42491104758646,\"lat\":37.77663946380341,\"arrival\":1337737969000,\"departure\":1337737969000,\"orig\":null,\"zoneId\":null,\"geometry\":\"{\"type\": \"Point\", \"coordinates\": [-122.42491104758646,37.77663946380341]}\"},\"legGeometry\":{\"points\":\"ghqeFvxejVZpEDv@Ft@\",\"levels\":null,\"length\":4},\"routeShortName\":null,\"routeLongName\":null,\"boardRule\":null,\"alightRule\":null,\"duration\":108000,\"bogusNonTransitLeg\":false,\"steps\":[{\"distance\":141.70044806905693,\"relativeDirection\":null,\"streetName\":\"Hayes Street\",\"absoluteDirection\":\"WEST\",\"exit\":null,\"stayOn\":false,\"bogusName\":false,\"lon\":-122.42331971511402,\"lat\":37.776844148171264,\"elevation\":\"\"}]}],\"tooSloped\":false},{\"duration\":1098000,\"startTime\":1337737351000,\"endTime\":1337738449000,\"walkTime\":221,\"transitTime\":635,\"waitingTime\":242,\"walkDistance\":285.3088646187561,\"elevationLost\":0.0,\"elevationGained\":0.0,\"transfers\":0,\"fare\":null,\"legs\":[{\"startTime\":1337737351000,\"endTime\":1337737464000,\"distance\":143.60841654969917,\"mode\":\"WALK\",\"route\":\"\",\"agencyName\":null,\"agencyUrl\":null,\"routeColor\":null,\"routeTextColor\":null,\"interlineWithPreviousLeg\":null,\"tripShortName\":null,\"headsign\":null,\"agencyId\":null,\"tripId\":null,\"from\":{\"name\":\"Stockton Street\",\"stopId\":null,\"stopCode\":null,\"lon\":-122.40625983220806,\"lat\":37.785865575376455,\"arrival\":null,\"departure\":null,\"orig\":null,\"zoneId\":null,\"geometry\":\"{\"type\": \"Point\", \"coordinates\": [-122.40625983220806,37.785865575376455]}\"},\"to\":{\"name\":\"Market St & Grant Ave\",\"stopId\":{\"agencyId\":\"SFMTA\",\"id\":\"5674\"},\"stopCode\":null,\"lon\":-122.40516,\"lat\":37.78639,\"arrival\":1337737465000,\"departure\":1337737465000,\"orig\":null,\"zoneId\":null,\"geometry\":\"{\"type\": \"Point\", \"coordinates\": [-122.40516,37.78639]}\"},\"legGeometry\":{\"points\":\"s`seFbnbjV\EBGAk@{@kAeAyA\",\"levels\":null,\"length\":6},\"routeShortName\":null,\"routeLongName\":null,\"boardRule\":null,\"alightRule\":null,\"duration\":113000,\"bogusNonTransitLeg\":false,\"steps\":[{\"distance\":17.110596300427797,\"relativeDirection\":null,\"streetName\":\"Stockton Street\",\"absoluteDirection\":\"SOUTH\",\"exit\":null,\"stayOn\":false,\"bogusName\":false,\"lon\":-122.40625983220806,\"lat\":37.785865575376455,\"elevation\":\"\"},{\"distance\":23.570645353551058,\"relativeDirection\":\"LEFT\",\"streetName\":\"4th Street\",\"absoluteDirection\":\"SOUTHEAST\",\"exit\":null,\"stayOn\":false,\"bogusName\":false,\"lon\":-122.4062293,\"lat\":37.7857136,\"elevation\":\"\"},{\"distance\":102.92717489572031,\"relativeDirection\":\"LEFT\",\"streetName\":\"Market Street\",\"absoluteDirection\":\"NORTHEAST\",\"exit\":null,\"stayOn\":false,\"bogusName\":false,\"lon\":-122.40596740000001,\"lat\":37.7857071,\"elevation\":\"\"}]},{\"startTime\":1337737585000,\"endTime\":1337738220000,\"distance\":1990.5607087872652,\"mode\":\"BUS\",\"route\":\"21\",\"agencyName\":null,\"agencyUrl\":null,\"routeColor\":null,\"routeTextColor\":null,\"interlineWithPreviousLeg\":null,\"tripShortName\":null,\"headsign\":\"Golden Gate Park\",\"agencyId\":\"SFMTA\",\"tripId\":\"5086543\",\"from\":{\"name\":\"Market St & Grant Ave\",\"stopId\":{\"agencyId\":\"SFMTA\",\"id\":\"5674\"},\"stopCode\":null,\"lon\":-122.40516,\"lat\":37.78639,\"arrival\":null,\"departure\":null,\"orig\":null,\"zoneId\":null,\"geometry\":\"{\"type\": \"Point\", \"coordinates\": [-122.40516,37.78639]}\"},\"to\":{\"name\":\"Hayes St & Gough St\",\"stopId\":{\"agencyId\":\"SFMTA\",\"id\":\"4996\"},\"stopCode\":null,\"lon\":-122.423326,\"lat\":37.776893,\"arrival\":1337738220000,\"departure\":1337738220000,\"orig\":null,\"zoneId\":null,\"geometry\":\"{\"type\": \"Point\", \"coordinates\": [-122.423326,37.776893]}\"},\"legGeometry\":{\"points\":\"mcseF|fbjVrBpC|E|G~B`DlCnD`B|BnBlCnEhGx@dAdAxALRvIpLFHxDjFL~AJvA\nFh@jIL~AZdFh@hIF`A\",\"levels\":null,\"length\":22},\"routeShortName\":\"21\",\"routeLongName\":\"HAYES\",\"boardRule\":null,\"alightRule\":null,\"duration\":635000,\"bogusNonTransitLeg\":false,\"intermediateStops\":[]},{\"startTime\":1337738341000,\"endTime\":1337738449000,\"distance\":141.70044806905693,\"mode\":\"WALK\",\"route\":\"\",\"agencyName\":null,\"agencyUrl\":null,\"routeColor\":null,\"routeTextColor\":null,\"interlineWithPreviousLeg\":null,\"tripShortName\":null,\"headsign\":null,\"agencyId\":null,\"tripId\":null,\"from\":{\"name\":\"Hayes Street\",\"stopId\":null,\"stopCode\":null,\"lon\":-122.42331971511402,\"lat\":37.776844148171264,\"arrival\":null,\"departure\":null,\"orig\":null,\"zoneId\":null,\"geometry\":\"{\"type\": \"Point\", \"coordinates\": [-122.42331971511402,37.776844148171264]}\"},\"to\":{\"name\":\"Hayes Street\",\"stopId\":null,\"stopCode\":null,\"lon\":-122.42491104758646,\"lat\":37.77663946380341,\"arrival\":1337738449000,\"departure\":1337738449000,\"orig\":null,\"zoneId\":null,\"geometry\":\"{\"type\": \"Point\", \"coordinates\": [-122.42491104758646,37.77663946380341]}\"},\"legGeometry\":{\"points\":\"ghqeFvxejVZpEDv@Ft@\",\"levels\":null,\"length\":4},\"routeShortName\":null,\"routeLongName\":null,\"boardRule\":null,\"alightRule\":null,\"duration\":108000,\"bogusNonTransitLeg\":false,\"steps\":[{\"distance\":141.70044806905693,\"relativeDirection\":null,\"streetName\":\"Hayes Street\",\"absoluteDirection\":\"WEST\",\"exit\":null,\"stayOn\":false,\"bogusName\":false,\"lon\":-122.42331971511402,\"lat\":37.776844148171264,\"elevation\":\"\"}]}],\"tooSloped\":false},{\"duration\":1098000,\"startTime\":1337738071000,\"endTime\":1337739169000,\"walkTime\":221,\"transitTime\":635,\"waitingTime\":242,\"walkDistance\":285.3088646187561,\"elevationLost\":0.0,\"elevationGained\":0.0,\"transfers\":0,\"fare\":null,\"legs\":[{\"startTime\":1337738071000,\"endTime\":1337738184000,\"distance\":143.60841654969917,\"mode\":\"WALK\",\"route\":\"\",\"agencyName\":null,\"agencyUrl\":null,\"routeColor\":null,\"routeTextColor\":null,\"interlineWithPreviousLeg\":null,\"tripShortName\":null,\"headsign\":null,\"agencyId\":null,\"tripId\":null,\"from\":{\"name\":\"Stockton Street\",\"stopId\":null,\"stopCode\":null,\"lon\":-122.40625983220806,\"lat\":37.785865575376455,\"arrival\":null,\"departure\":null,\"orig\":null,\"zoneId\":null,\"geometry\":\"{\"type\": \"Point\", \"coordinates\": [-122.40625983220806,37.785865575376455]}\"},\"to\":{\"name\":\"Market St & Grant Ave\",\"stopId\":{\"agencyId\":\"SFMTA\",\"id\":\"5674\"},\"stopCode\":null,\"lon\":-122.40516,\"lat\":37.78639,\"arrival\":1337738185000,\"departure\":1337738185000,\"orig\":null,\"zoneId\":null,\"geometry\":\"{\"type\": \"Point\", \"coordinates\": [-122.40516,37.78639]}\"},\"legGeometry\":{\"points\":\"s`seFbnbjV\EBGAk@{@kAeAyA\",\"levels\":null,\"length\":6},\"routeShortName\":null,\"routeLongName\":null,\"boardRule\":null,\"alightRule\":null,\"duration\":113000,\"bogusNonTransitLeg\":false,\"steps\":[{\"distance\":17.110596300427797,\"relativeDirection\":null,\"streetName\":\"Stockton Street\",\"absoluteDirection\":\"SOUTH\",\"exit\":null,\"stayOn\":false,\"bogusName\":false,\"lon\":-122.40625983220806,\"lat\":37.785865575376455,\"elevation\":\"\"},{\"distance\":23.570645353551058,\"relativeDirection\":\"LEFT\",\"streetName\":\"4th Street\",\"absoluteDirection\":\"SOUTHEAST\",\"exit\":null,\"stayOn\":false,\"bogusName\":false,\"lon\":-122.4062293,\"lat\":37.7857136,\"elevation\":\"\"},{\"distance\":102.92717489572031,\"relativeDirection\":\"LEFT\",\"streetName\":\"Market Street\",\"absoluteDirection\":\"NORTHEAST\",\"exit\":null,\"stayOn\":false,\"bogusName\":false,\"lon\":-122.40596740000001,\"lat\":37.7857071,\"elevation\":\"\"}]},{\"startTime\":1337738305000,\"endTime\":1337738940000,\"distance\":1990.5607087872652,\"mode\":\"BUS\",\"route\":\"21\",\"agencyName\":null,\"agencyUrl\":null,\"routeColor\":null,\"routeTextColor\":null,\"interlineWithPreviousLeg\":null,\"tripShortName\":null,\"headsign\":\"Golden Gate Park\",\"agencyId\":\"SFMTA\",\"tripId\":\"5086544\",\"from\":{\"name\":\"Market St & Grant Ave\",\"stopId\":{\"agencyId\":\"SFMTA\",\"id\":\"5674\"},\"stopCode\":null,\"lon\":-122.40516,\"lat\":37.78639,\"arrival\":null,\"departure\":null,\"orig\":null,\"zoneId\":null,\"geometry\":\"{\"type\": \"Point\", \"coordinates\": [-122.40516,37.78639]}\"},\"to\":{\"name\":\"Hayes St & Gough St\",\"stopId\":{\"agencyId\":\"SFMTA\",\"id\":\"4996\"},\"stopCode\":null,\"lon\":-122.423326,\"lat\":37.776893,\"arrival\":1337738940000,\"departure\":1337738940000,\"orig\":null,\"zoneId\":null,\"geometry\":\"{\"type\": \"Point\", \"coordinates\": [-122.423326,37.776893]}\"},\"legGeometry\":{\"points\":\"mcseF|fbjVrBpC|E|G~B`DlCnD`B|BnBlCnEhGx@dAdAxALRvIpLFHxDjFL~AJvA\nFh@jIL~AZdFh@hIF`A\",\"levels\":null,\"length\":22},\"routeShortName\":\"21\",\"routeLongName\":\"HAYES\",\"boardRule\":null,\"alightRule\":null,\"duration\":635000,\"bogusNonTransitLeg\":false,\"intermediateStops\":[]},{\"startTime\":1337739061000,\"endTime\":1337739169000,\"distance\":141.70044806905693,\"mode\":\"WALK\",\"route\":\"\",\"agencyName\":null,\"agencyUrl\":null,\"routeColor\":null,\"routeTextColor\":null,\"interlineWithPreviousLeg\":null,\"tripShortName\":null,\"headsign\":null,\"agencyId\":null,\"tripId\":null,\"from\":{\"name\":\"Hayes Street\",\"stopId\":null,\"stopCode\":null,\"lon\":-122.42331971511402,\"lat\":37.776844148171264,\"arrival\":null,\"departure\":null,\"orig\":null,\"zoneId\":null,\"geometry\":\"{\"type\": \"Point\", \"coordinates\": [-122.42331971511402,37.776844148171264]}\"},\"to\":{\"name\":\"Hayes Street\",\"stopId\":null,\"stopCode\":null,\"lon\":-122.42491104758646,\"lat\":37.77663946380341,\"arrival\":1337739169000,\"departure\":1337739169000,\"orig\":null,\"zoneId\":null,\"geometry\":\"{\"type\": \"Point\", \"coordinates\": [-122.42491104758646,37.77663946380341]}\"},\"legGeometry\":{\"points\":\"ghqeFvxejVZpEDv@Ft@\",\"levels\":null,\"length\":4},\"routeShortName\":null,\"routeLongName\":null,\"boardRule\":null,\"alightRule\":null,\"duration\":108000,\"bogusNonTransitLeg\":false,\"steps\":[{\"distance\":141.70044806905693,\"relativeDirection\":null,\"streetName\":\"Hayes Street\",\"absoluteDirection\":\"WEST\",\"exit\":null,\"stayOn\":false,\"bogusName\":false,\"lon\":-122.42331971511402,\"lat\":37.776844148171264,\"elevation\":\"\"}]}],\"tooSloped\":false}]}}";
		//		List<String> authors = JsonPath.read(json, "$.store.book[*].author");
		/*	Object obj=JSONValue.parse(s);
		JSONArray array=(JSONArray)obj;
		System.out.println("======the 2nd element of array======");
		System.out.println(array.get(1));*/

	}

	private static String[] getXmlData(String strTrip) throws JDOMException, IOException, URISyntaxException{
		String[] strResponse = new String[4];
		SAXBuilder builder = new SAXBuilder();
		Document document = builder.build(new StringReader(strTrip));

		Element beans = document.getRootElement();
		strResponse[0] = ((Element)XPath.selectSingleNode(beans, "plan/from/name")).getValue();
		strResponse[1] = ((Element)XPath.selectSingleNode(beans, "plan/to/name")).getValue();
		strResponse[2] = ((Element)XPath.selectSingleNode(beans, "plan/itineraries/itinerary/startTime")).getValue();
		strResponse[3] = ((Element)XPath.selectSingleNode(beans, "plan/itineraries/itinerary/endTime")).getValue();
		getFeedback(strResponse[0], strResponse[0], strResponse[0], strResponse[0], strResponse[0], strResponse[0]);
		return strResponse;
	}
}
